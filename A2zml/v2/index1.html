<!doctype html>
<html lang="zh-CN" class="mdui-theme-auto">
<head>
<meta charset="UTF-8">
<title>魔法禁书</title>
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="description" content="科学上网">
<meta name="keywords" content="jixiejidiguan.top, JIXIEJIDIGUAN, v2, 魔法禁书">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>
mdui-top-app-bar{position:fixed!important}@media (min-width:840px){mdui-button-icon[icon="menu"]{display:none}}
mdui-navigation-drawer{position:fixed!important;display:none}@media (min-width:840px){mdui-navigation-drawer{display:block;bottom:0;left:0;top:4rem;width:22.5rem}}
mdui-layout-main{overflow:visible;display:block;padding-top:4rem}mdui-layout-main:not(:defined){visibility:visible}@media (min-width:840px){mdui-layout-main{padding-left:22.5rem}}
div.main{display:flex;justify-content:center}
div.container{flex:1;min-width:0;padding:1rem}@media (min-width:840px){.container{padding:1rem 3rem}}
[class*=row-]{margin-right:-8px;margin-left:-8px}
[class*=row-]::after{display:table;clear:both;content:''}
.col{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;min-height:1px;padding-right:2px;padding-left:2px}
.row-xs-2 .col{float:left;width:50%}
@media (min-width:600px){.row-sm-3 .col{float:left;width:33.333333%}}
@media (min-width:1024px){.row-md-4 .col{float:left;width:25%}}
@media (min-width:1440px){.row-lg-5 .col{float:left;width:20%}}
section{display: none;}
section[active]{display: block;}
h3{padding-top:1em}
mdui-card{width:100%}
mdui-card.mdui-card{padding:1rem}
mdui-fab{position: fixed;bottom: 30px;right: 30px;display: none;border: none;cursor: pointer;z-index: 9999}
footer{padding:20px 0;font-size:1rem;text-align:center}
</style>
<script id="JIXIEJIDIGUAN" src="/ROOT/PORT/library/framework.js"></script>
</head>
<body>
<mdui-layout>
<mdui-top-app-bar scroll-behavior="elevate">
<mdui-button-icon icon="menu"></mdui-button-icon>
<mdui-top-app-bar-title>魔法禁书</mdui-top-app-bar-title>
<mdui-tooltip content="爱发电"><mdui-button-icon href="https://afdian.com/a/JIXIEJIDIGUAN" target="_blank" variant="standard" icon="bolt"></mdui-button-icon></mdui-tooltip>
<mdui-tooltip content="网站首页"><mdui-button-icon href="/#Home" variant="standard" icon="home"></mdui-button-icon></mdui-tooltip>
</mdui-top-app-bar>
<mdui-navigation-drawer close-on-overlay-click>
<mdui-list>
<mdui-list-subheader>分类</mdui-list-subheader>
<div id="list"></div>
</mdui-list>
</mdui-navigation-drawer>
<mdui-layout-main>
<div class="main">
<div class="container mdui-prose">
<div id="const"><mdui-linear-progress></mdui-linear-progress><div style="font-size: var(--mdui-typescale-display-large-size);">加载中</div></div>
<mdui-fab variant="primary" icon="arrow_drop_up"></mdui-fab>
<footer>
© 2025 <a href="https://jixiejidiguan.top/A2zml">爱莫能助</a>
<span> | </span>
<a href="https://beian.miit.gov.cn">湘ICP备2022000040号</a>
<a href="https://icp.gov.moe/?keyword=20220440">萌ICP备20220440号</a>
<span> | </span>
<a href="https://www.12377.cn">违法和不良信息举报中心</a>
</footer>
</div>
</div>
</mdui-layout-main>
</mdui-layout>
<script>
(function(){document.querySelector("mdui-button-icon[icon='menu']").addEventListener("click", () => document.querySelector("mdui-navigation-drawer").open = true)})();
async function fetchData(url,options={}){const{timeout=10000,maxRetries=2,headers={}}=options;const controller=new AbortController();const timeoutId=setTimeout(()=>controller.abort(),timeout);try{for(let attempt=0;attempt<maxRetries;attempt++){try{const response=await fetch(url,{method:'GET',headers:{'Content-Type':'application/json',...headers},signal:controller.signal,});if(!response.ok){throw new Error(`HTTP error!Status:${response.status}`)}const data=await response.json();clearTimeout(timeoutId);return data}catch(error){if(attempt===maxRetries-1){throw error;}console.warn(`请求失败，尝试第${attempt+1}次重试...`,error)}}}catch(error){if(error.name==='AbortError'){throw new Error('请求超时');}else{throw error;}}}

(async () => {
const contentContainer = document.querySelector('#const');
const mduiList = document.querySelector('#list');

try {
const data = await fetchData('/ROOT/API/A2ZML/data.json');
let list = '';
let html = '';

data.forEach((zone, index) => {
list += `<mdui-list-item href="#${zone.title}" ${index === 0 ? ' active' : ''}>${zone.title}</mdui-list-item>`;

html += `
<section id="${zone.title}" ${index === 0 ? ' active' : ''}>
${zone.data.map(category => `
<div>
<h3>${category.title}</h3>
<mdui-card>
<mdui-list class="row-xs-2 row-sm-3 row-md-4 row-lg-5">
${category.data.map(item => `
<mdui-tooltip>
<mdui-list-item class="col" href="${item.href}" target="_blank" headline-line="1" headline="${item.title}" description-line="1" description="${item.description}" end-icon="arrow_right"></mdui-list-item>
<div slot="content"><div style="font-size: 1.4em">${item.title}</div><div>${item.description}</div></div>
</mdui-tooltip>
`).join('')}
</mdui-list>
</mdui-card>
</div>
`).join('')}
</section>
`;
});
mduiList.innerHTML = list;
contentContainer.innerHTML = html;
const listItems = document.querySelectorAll('div#list mdui-list-item');
const contentSections = document.querySelectorAll('div section');
listItems.forEach((item, index) => {
item.addEventListener('click', (e) => {
listItems.forEach(li => li.removeAttribute('active'));
item.setAttribute('active', '');
contentSections.forEach(section => section.removeAttribute('active'));
contentSections[index].setAttribute('active', '');
});
});
clicks();
} catch (error) {
contentContainer.innerHTML = `
<mdui-alert type="error" class="mdui-m-t-3">
数据加载失败: ${error.message}
</mdui-alert>
`;
console.error('请求失败:', error);
}
})();
window.addEventListener('scroll', function() {
  const btn = document.querySelector('mdui-fab[icon="arrow_drop_up"]');
  // 当滚动超过300px时显示按钮[4](@ref)
  if (document.documentElement.scrollTop > 300 || document.body.scrollTop > 300) {
    btn.style.display = 'block';
  } else {
    btn.style.display = 'none';
  }
});
document.querySelector('mdui-fab[icon="arrow_drop_up"]').addEventListener('click', function() {
  // 平滑滚动动画[5](@ref)
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
});
function clicks() {
const c=window.location.hash.slice(1);
if(c){
const e=document.querySelector(`div.list mdui-list-item[href="#${c}"]`);
e&&e.click()
}
}
</script>
</body>
</html>
