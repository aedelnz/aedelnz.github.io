<!DOCTYPE html>
<html lang="en">
<head>
<title>画的个人记录</title>
<meta charset="utf-8">
<meta name="referrer" content="no-referrer" />
<meta name="Content-Security-Policy" content="upgrade-insecure-requests" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<meta name="keywords" content="画的个人记录" />
<meta name="description" content="嗨！欢迎来到画的个人记录，正如你所见。这里只是个记录个人收藏的页面，收藏的基本结构是国漫。就是这么简单，没有你想的那么复杂。" />
<link rel="icon" data-href="./favicon.ico">
<link href="./start/index.css" rel="stylesheet">
<link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.1/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.bootcdn.net/ajax/libs/bootstrap-icons/1.11.0/font/bootstrap-icons.min.css" rel="stylesheet">
<script src="../start/origin.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>

<!-- ######################### 导航分页 ######################### -->
<nav class="navbar fixed-top navbar-expand-lg">
<div class="container">
<a class="d-flex fs-3 fw-semibold font-monospace text-black-50 text-decoration-none" href="/">画的个人记录</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-nav" aria-controls="navbar-nav" ><span class="navbar-toggler-icon"></span></button>
<div class="navbar-collapse collapse" id="navbar-nav">
<ul class="navbar-nav flex-wrap ms-md-auto">
<li class="nav-item"><a class="nav-link link fs-4 text-black-50" href="#News">最新动态</a></li>
<li class="nav-item"><a class="nav-link link fs-4 text-black-50" href="#Guoman_Collection">国漫收藏</a></li>
<li class="nav-item"><a class="nav-link link fs-4 text-black-50" href="#Links">友情链接</a></li>
</ul>
</div>
</div>
</nav>

<div id="md">
<!-- ######################### 轮播页面 ######################### -->
<!-- ######################### 最新动态 ######################### -->
<div id="News">
<section id="Carousel"></section>
<section id="Page"></section>
<section id="Project"></section>
</div>

<!-- ######################### 第二页 ######################### -->
<section class="container">
<div class="pm-1 pb-3" ></div>
<div class="row">
<div class="col-md-8">
<!-- ######################### 国漫收藏 ######################### -->
<div id="Guoman_Collection">
<p class="fs-4 fw-bolder font-monospace text-body-tertiary">国漫收藏</p>
<div class="position-sticky shadow-lg p-3 mb-5 bg-body-tertiary rounded">
<div id="Guoman_Collection_add"></div>
</div>
</div>
<!-- ######################### 友情链接 ######################### -->
<div id="Links">
<p class="fs-4 fw-bolder font-monospace text-body-tertiary">友情链接</p>
<div class="position-sticky shadow-lg p-3 mb-5 bg-body-tertiary rounded">
<div id="Links_add"></div>
</div>
</div>
</div>
</div>
</section>
</div>



<!-- ######################### 版权 ######################### -->
<footer class="container mt-5">
<div class="d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top">
<p class="mb-2 text-muted font-monospace" id="Follow_us"></p>
<p class="mb-2 text-muted font-monospace" id="ICP_record_number"></p>
<p class="mb-2 text-muted font-monospace">版权所有 © 2022-2024 画的个人记录. 由「<a class="text-muted text-reset" href="/">机械极地馆</a>」提供技术支持</p>
</div>
</footer>

<script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.1/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
// data-src
$(function(){function e(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=($(window).height()||document.documentElement.clientHeight)&&t.right<=($(window).width()||document.documentElement.clientWidth)}function t(){$('img[data-src]').each(function(){var t=$(this);e(this)&&(t.attr('src',t.data('src')).removeAttr('data-src'))})}$(window).on('scroll',t),t()});

$.getJSON('./start/Datadake/get/json/index.json',function(t){
$(function () {
var Carousel = $('#Carousel');
var cards = [];
$.each(t[0].Carousel_data, function(i, n) {var newCard = $(`<div class="card rounded-0 text-bg-dark position-relative" style="height: 100vh;"><img src="${n.image}" class="card-img" style="object-fit: cover; height: 100%; width: 100%; position: absolute; filter: brightness(60%)"><div class="card-img-overlay position-absolute top-50 start-50 translate-middle w-100 container font-monospace"><h5 class="card-title fs-1 fw-bolder">${n.title}</h5><p class="card-text fs-4 fw-lighter">${n.citation}</p><p class="card-text"><a href="${n.link}" class="btn btn-primary fw-lighter"><small>预览</small></a></p></div><div class="position-absolute top-50 start-0 translate-middle-y"><button type="button" class="mx-3 btn btn-secondary btn-sm prevButton"><i class="bi bi-caret-left"></i></button></div><div class="position-absolute top-50 end-0 translate-middle-y"><button type="button" class="mx-3 btn btn-secondary btn-sm nextButton"><i class="bi bi-caret-right"></i></button></div></div>`);Carousel.append(newCard.hide());cards.push(newCard);});
var currentIndex = 0;
cards[currentIndex].show();
$('.prevButton').on('click', function() {cards[currentIndex].hide();currentIndex = (currentIndex - 1 + cards.length) % cards.length;cards[currentIndex].show();});
$('.nextButton').on('click', function() {cards[currentIndex].hide();currentIndex = (currentIndex + 1) % cards.length;cards[currentIndex].show();});
setInterval(function() {cards[currentIndex].hide();currentIndex = (currentIndex + 1) % cards.length;cards[currentIndex].show();}, 5000);
});

$(function () {
var Pages = $('#Page');
var pgCard = $(`<div class="container my-5"><p class="h3 fw-bolder text-center mb-3">${t[1].Page}</p><div class="shadow p-1 py-3 rounded-3"><div class="container-fluid text-center"><div class="row row-cols-2 row-cols-lg-4 align-items-center g-2"></div></div></div></div>`);
$.each(t[1].Page_data, function(i, n) {
pgCard.find('.row').append($(`<div class="col"><a class="card ratio ratio-4x3 btn btn-outline-secondary" href="${n.link}"><div class="d-flex align-items-center justify-content-center"><div class="align-self-center text-center font-monospace text-truncate"><i class="fs-1 h1 bi ${n.image}"></i><div class="card-title">${n.title}</div><p class="card-text d-none d-lg-block">${n.citation}</p></div></div></a></div>`));
});
Pages.append(pgCard);
});

$(function () {
var Projects = $('#Project');
var gjCard = $(`<div class="pt-5"></div><div class="container my-5"><p class="h3 fw-bolder text-center mb-3">${t[2].Project}</p><div class="container-fluid text-center"></div></div>`);
$.each(t[2].Project_data, function(i, n) {
var colClass = i % 2 == 0 ? `<a class="card my-4 text-decoration-none" href="${n.link}"><div class="row g-0 position-relative"><img src="${n.image}" class="card-img-top d-lg-block d-lg-none" alt="..."><div class="col-md-5 mb-md-0 p-md-0"><img src="${n.image}" class="w-100 rounded-start d-none d-lg-block" alt="..."></div><div class="col-md-7 p-4 ps-md-0 d-flex align-items-center"><div class="text-center w-100"><div class="h3 fw-bolder mt-0">${n.title}</div><p>${n.citation}</p></div></div></div></a>`
 : `<a class="card my-4 text-decoration-none" href="${n.link}"><div class="row g-0 position-relative"><img src="${n.image}" class="card-img-top d-lg-block d-lg-none" alt="..."><div class="col-md-7 p-4 ps-md-0 d-flex align-items-center"><div class="text-center w-100"><div class="h3 fw-bolder mt-0">${n.title}</div><p>${n.citation}</p></div></div><div class="col-md-5 mb-md-0 p-md-0"><img src="${n.image}" class="w-100 rounded-end d-none d-lg-block" alt="..."></div></div></a>`;
gjCard.find('div.container-fluid').append($(colClass));
});
Projects.append(gjCard);
});


$(function () {
function appendDataToElement(element, data, title) {var content = $(`<span><span class="fw-bolder text-start">${title}</span></span>`);$.each(data, function(i, n) {content.find('span').append(`<a class="nav-link fw-lighter text-muted text-reset text-decoration-underline" href="${n.link}">${n.title}</a>`);});element.append(content);}
appendDataToElement($('#Follow_us'), t[3].Follow_us_data, t[3].Follow_us);
appendDataToElement($('#ICP_record_number'), t[3].ICP_record_number_data, t[3].ICP_record_number);
});

});


// 导航分页
var Label_classification = $('#News, #Guoman_Collection, #Links');
var nav_link = $(".link");
Label_classification.hide();
nav_link.on('click', function (e) {
e.preventDefault();
var pagination_id = $(this).attr("href");
Label_classification.hide();
$(pagination_id).toggle();
});
$('a[href="#News"]').trigger('click');
var fragment = window.location.hash.substring(1);
Label_classification.each(function () {
var elementId = $(this).attr('id');
if(fragment===elementId){
$('a[href="#'+elementId+'"]').trigger('click');
}
});


// 最新动态
function renderJsonToHtml(section) {
switch (section.type) {
case 'heading':
return '<h' + section.level + ' class="fs-' + section.level + '">' + section.text + '</h' + section.level + '>';
case 'list':
var listType = section.style === 'unordered' ? 'ul' : 'ol';
var items = section.items.map(function(item) {
return '<li>' + (typeof item === 'object' ? item.text : item) + '</li>';
});
return '<' + listType + '>' + items.join('') + '</' + listType + '>';
case 'link':
return '<a href="' + section.url + '">' + section.text + '</a>';
case 'image':
return '<img src="' + section.url + '" alt="' + section.altText + '">';
case 'blockquote':
return '<blockquote>' + section.text + '</blockquote>';
case 'hr':
return '<hr>';
case 'table':
var tableHtml = '<table><thead><tr>';
tableHtml += section.headers.map(function(header) {
return '<th>' + header + '</th>';
}).join('');
tableHtml += '</tr></thead><tbody>';
tableHtml += section.rows.map(function(row) {
return '<tr>' + row.map(function(cell) {
return '<td>' + cell + '</td>';
}).join('') + '</tr>';
}).join('');
tableHtml += '</tbody></table>';
return tableHtml;
case 'taskList':
var taskListHtml = '<ul>';
taskListHtml += section.items.map(function(item) {
return '<li>' + (item.checked ? '[x]' : '[ ]') + ' ' + item.text + '</li>';
}).join('');
taskListHtml += '</ul>';
return taskListHtml;
default:
return `<p>${section.text.split('\n').join('<br>')}</p>`;
// Add cases for other section types as needed
}
}
$.get('./start/Datadake/get/json/News.json', function(data) {
var markdown = $('#markdown');
var str = `<div class="row row-cols-1 row-cols-md-2 g-1">`;
data.forEach(function (content, index) {
str +=`<div class="col mb-2">
<div class="card">
<div class="carousel-inner ratio ratio-21x9 bg-body-secondary">
<div class="text-center">
<img src="${content.image}" class="rounded mx-auto d-block img-fluid" alt="${content.title}">
<div class="position-absolute bottom-0 p-2 text-bg-dark bg-opacity-50 w-100">
<h5 class="card-title text-truncate">${content.title}</h5>
</div>
</div>
</div>
<div class="card-body">`;
$.each(content.sections, function(index, section) {
renderJsonToHtml(section);
});
str +=`<div class="d-flex justify-content-between">
<p class="card-text">By ${content.author}</p>
<p class="card-text"><small class="text-muted">${content.timestamp}</small></p>
</div>
<div class="d-grid justify-content-end">
<button type="button" class="btn btn-outline-secondary" data-card-id="${index}" style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: 1.5rem; --bs-btn-font-size: .75rem;">查看</button>
</div>
</div>
</div>
</div>`;
markdown.on('click', '[data-card-id]', function() {
var cardId = $(this).data('card-id');
window.location.href = window.location.origin + '/#md=' + cardId;
var originalContent = markdown.html();
var md = $('#md');
md.empty();
if (cardId >= 0 && cardId < data.length) {
var selectedContent = data[cardId];
var str = `<div class="ratio ratio-21x9" style="display: flex;align-items: center;justify-content: center;height: 50vh;"><img src="${selectedContent.image}" style="width: 100%;height: 100%;object-fit: cover;object-position: center center;"></div><div class="pm-1 pb-3" style="border-radius: 10px;margin-bottom: 40px;margin-top: -26vh;overflow: hidden;padding: 15px 0;"></div><div class="container"><div class="position-sticky shadow-lg p-3 mb-5 bg-body-tertiary rounded"><div class="p-3 mt-3"><h1 class="text-center">${selectedContent.title}</h1><p class="text-center text-muted">By ${selectedContent.author} | ${selectedContent.timestamp}</p><div class="mt-4">`;
$.each(selectedContent.sections, function(index, section) {
str += renderJsonToHtml(section);
//markdown.html(originalContent);
});
md.append(str);
} else {
markdown.text('Invalid card ID');
}
});
});
str += `</div></div></div></div></div>`;
markdown.append(str);
var match = RegExp('[#&]md=([^&]*)').exec(window.location.hash);
var decodedValue = match && decodeURIComponent(match[1].replace(/\+/g, ' '));
$('[data-card-id="' + decodedValue + '"]').click();
});

// 国漫收藏
$.when(
$.get('./start/Datadake/get/json/TENCENT_COMIC.json'),
$.get('./start/Datadake/get/json/Bilibili.json')
).then( function (data1, data2) {
var Guoman_Collection_add = $('#Guoman_Collection_add');
var str = `<div class="row row-cols-2 row-cols-sm-3 row-cols-md-4 g-2">`;
data1[0].forEach(function (data) {
str += `<div class="col"><a class="card text-decoration-none text-black" href="${data.url}" title="${data.title}"><div class="carousel-inner ratio ratio-4x3"><div class="text-center"><img data-src="${data.img}" class="img-fluid" alt="${data.title}"><div class="position-absolute bottom-0 p-2 text-bg-dark bg-opacity-50 w-100"><h5 class="card-title text-truncate">${data.title}</h5></div></div></div><p class="card-body card-text text-truncate" title="${data.figure_desc}">${data.figure_desc}</p></a></div>`;
});
data2[0].forEach(function (data) {
str += `<div class="col"><a class="card text-decoration-none text-black" href="${data.url}" title="${data.title}"><div class="carousel-inner ratio ratio-4x3"><div class="text-center"><img data-src="${data.img}" class="img-fluid" alt="${data.title}"><div class="position-absolute bottom-0 p-2 text-bg-dark bg-opacity-50 w-100"><h5 class="card-title text-truncate">${data.title}</h5></div></div></div><p class="card-body card-text text-truncate" title="${data.figure_desc}">${data.figure_desc}</p></a></div>`;
});
str += `</div>`;
Guoman_Collection_add.append(str);
});

// 友情链接
$.get('./start/Datadake/get/json/Links.json', function(data) {
var Links_add = $('#Links_add');
var str = `<!-- #########################  ######################### -->
<div class="row g-1 mb-3 row-cols-1 row-cols-lg-3">
<div class="col"><div class="fs-5">友情链接申请规则</div><p class="text-break fw-normal font-monospace text-muted">1.不接受没有原创内容的站点<br>2.不接受版权问题严重的站点<br>3.全站 (强制) 使用HTTPS协议<br>4.且无影响阅读体验的广告</p></div>
<div class="col"><div class="fs-5">友链申请示例</div><textarea class="form-control text-nowrap border" rows="4">名称：画的个人记录\n介绍：其实没有你们想的那么复杂！\n地址：https://jixiejidiguan.top\n图片：https://jixiejidiguan.top/favicon.ico</textarea></div>
<div class="col"><div class="fs-5">PS:</div><p class="text-break fw-normal font-monospace text-muted">链接由于无法访问或您的网站没有发现本站链接等其他原因，将会暂时撤销超链接，恢复请留言通知我，望请谅解，谢谢！<a href="mailto:aedelnz@111.com?subject=友情链接申请" title="aedelnz@111.com">去申请友情链接</a></p></div>
</div>
<!-- #########################  ######################### -->
<div class="fs-5">友链</div>
<div class="row row-cols-2 row-cols-sm-3 row-cols-md-4 g-2 mb-5">`;
function shuffleArrayWithJQuery(array) {
$.each(array, function(currentIndex) {
var randomIndex = Math.floor(Math.random() * currentIndex);
[array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
});
return array;
}
shuffleArrayWithJQuery(data.Links);
data.Links.forEach(function (link) {
str += `<div class="col"><div class="carousel-inner ratio ratio-1x1"><a class="card shadow bg-body-tertiary rounded text-decoration-none text-black" href="${link.url}" title="${link.title}"><div class="d-flex align-items-center"><img data-src="${link.img}" class="mx-auto img-fluid rounded float-start" alt="${link.title}"></div><div class="position-absolute bottom-0 p-2 text-bg-dark bg-opacity-50 w-100"><h5 class="card-title text-truncate">${link.title}</h5></div></a></div></div>`;
});
str += `</div>
<!-- #########################  ######################### -->
<div class="table-responsive mb-3">
<div class="fs-5">友链删除日志</div>
<table class="table text-truncate"><thead><tr><th scope="col">站点名称</th><th scope="col">站点链接</th><th scope="col">删除时间</th><th scope="col">删除原因</th></tr></thead>
<tbody class="table-group-divider">`;
data.Linkson.forEach(function (linkson) {
str += `<tr><th scope="row">${linkson.Sitename}</th><td>${linkson.Sitelinks}</td><td>${linkson.Deletiontime}</td><td>${linkson.Reasonfordeletion}</td></tr>`;
});
str += `</tbody></table>
</div>`;
Links_add.append(str);
});

});
</script>
</body>
</html>